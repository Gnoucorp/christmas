"function"!=typeof Object.create&&(Object.create=function(t){function s(){}return s.prototype=t,new s}),function(t,s,i){t.gcChristmas=function(n){var a=Object.create({canvas:null,ctx:null,particlesCount:0,particles:[],angle:0,snowInterval:null,init:function(s){this.options=t.extend({},t.gcChristmas.options,s),this.particles.splice(),this.initCanvas(),this.snow(),this.bindWindow()},initCanvas:function(){this.options.target.prepend('<canvas id="canvas" style="display: block; height: 100%; width: 100%; position: absolute; z-index: 3; pointer-events: none;"></canvas>'),this.canvas=i.getElementById("canvas"),this.ctx=this.canvas.getContext("2d");var t=s.innerWidth,n=s.innerHeight;n=n-parseInt(this.options.target.css("marginTop").replace("px",""))-parseInt(this.options.target.css("marginBottom").replace("px","")),this.canvas.width=t,this.canvas.height=n},clear:function(){this.stop(),this.clearCanvas(),this.particlesCount=0,this.particles.splice(0,this.particles.length),this.angle=null,this.snowInterval=null},start:function(){this.snow()},snow:function(){var t=this;switch(t.particlesCount<=0&&t.addFlakes(t.options.maxParticles),t.options.snowMode){case"flakes":t.snowInterval=setInterval(function(){t.drawFlakes()},t.options.refreshInterval);break;case"circles":t.snowInterval=setInterval(function(){t.drawCircles()},t.options.refreshInterval);break;case"images":t.snowInterval=setInterval(function(){t.drawImages()},t.options.refreshInterval);break;case"custom":t.snowInterval=setInterval(function(){t.drawCustom()},t.options.refreshInterval);break;default:t.snowInterval=setInterval(function(){t.drawFlakes()},t.options.refreshInterval)}},bindWindow:function(){var i=this;i.options.clickIncrement>0&&t(s).on("click",function(){i.addFlakes(i.options.clickIncrement)}),t(s).on("resize scroll",function(){t("#canvas").css("top",s.scrollY+"px").css("left",s.scrollX+"px")})},addFlakes:function(t){for(var i=s.innerWidth,n=s.innerHeight,a=0;a<t;a++){var e={x:s.scrollX+Math.random()*i,y:s.scrollY+Math.random()*n,r:Math.random()*this.options.maxFlakesSize+1,d:Math.random()*Math.max(this.options.maxDensity,this.particlesCount)};"images"===this.options.snowMode&&(this.options.images.length>1?e.i=Math.floor(Math.random()*this.options.images.length):e.i=0),this.particles.push(e)}this.particlesCount=this.particlesCount+t},drawFlakes:function(){this.clearCanvas(),this.ctx.beginPath(),this.ctx.lineWidth=2,this.ctx.lineCap="round",this.ctx.strokeStyle=this.options.snowColor;for(var t=0;t<this.particlesCount;t++){var s=this.particles[t];this.ctx.moveTo(s.x,s.y);for(var i=0;i<this.options.flakesSegments;i++)this.drawFlakeSegment(s,2*i*Math.PI/this.options.flakesSegments)}this.ctx.stroke(),this.update()},drawFlakeSegment:function(t,s){var i=t.x,n=t.y,a=i+Math.cos(s)*t.r,e=n+Math.sin(s)*t.r;this.ctx.moveTo(i,n),this.ctx.lineTo(a,e);var o=2*this.options.smallSegmentsAngle*Math.PI/360,r=i+Math.cos(s)*t.r*this.options.smallSegmentsStart,h=n+Math.sin(s)*t.r*this.options.smallSegmentsStart,c=r+Math.cos(s+o)*t.r*this.options.smallSegmentsLength,l=h+Math.sin(s+o)*t.r*this.options.smallSegmentsLength,p=r+Math.cos(s-o)*t.r*this.options.smallSegmentsLength,m=h+Math.sin(s-o)*t.r*this.options.smallSegmentsLength;this.ctx.moveTo(r,h),this.ctx.lineTo(c,l),this.ctx.moveTo(r,h),this.ctx.lineTo(p,m)},drawCircles:function(){this.clearCanvas(),this.ctx.fillStyle=this.options.snowColor,this.ctx.beginPath();for(var t=0;t<this.particlesCount;t++){var s=this.particles[t];this.ctx.moveTo(s.x,s.y),this.ctx.arc(s.x,s.y,s.r,0,2*Math.PI,!0)}this.ctx.fill(),this.update()},drawImages:function(){this.clearCanvas();for(var t=0;t<this.particlesCount;t++){var s=this.particles[t],i=this.options.images[s.i],n=new Image;n.src=i.src;var a=s.r*i.width/i.ratio,e=s.r*i.height/i.ratio;this.ctx.moveTo(s.x,s.y),this.ctx.drawImage(n,s.x-Math.round(a/2),s.y-Math.round(e/2),a,e)}this.update()},drawCustom:function(){this.clearCanvas(),this.options.customDrawInit(this,this.ctx);for(var t=0;t<this.particlesCount;t++)this.ctx.moveTo(p.x,p.y),this.options.customDrawParticle(this,this.ctx,this.particles[t]);this.options.customDrawEnd(this,this.ctx),this.update()},update:function(){this.angle+=.01;for(var i=s.innerWidth,n=s.innerHeight,a=0;a<this.particlesCount;a++){var e=this.particles[a];if(e.y+=Math.cos(this.angle+e.d)+1+e.r/2,e.x+=2*Math.sin(this.angle),e.x>i+5||e.x<-5||e.y>n){var o,r,h=n*Math.abs(Math.sin(this.angle)),c=i+h;Math.random()>h/c?(o=Math.random()*i,r=-10):(r=Math.random()*n,o=Math.sin(this.angle)>0?-5:i+5),this.particles[a]=t.extend(this.particles[a],{x:o,y:r})}}},stop:function(){null!=this.snowInterval&&clearInterval(this.snowInterval)},clearCanvas:function(){var t=s.innerWidth,i=s.innerHeight;this.ctx.clearRect(0,0,t,i)}});return a.init(n),a},t.gcChristmas.options={target:t("html"),removeTargetMargin:!0,snowColor:"rgba(235, 235, 235, 0.8)",maxParticles:20,clickIncrement:7,maxFlakesSize:10,refreshInterval:40,maxDensity:40,snowMode:"flakes",flakesSegments:6,smallSegmentsLength:.4,smallSegmentsStart:.6,smallSegmentsAngle:30,customDrawInit:function(t,s){},customDrawParticle:function(t,s,i){},customDrawEnd:function(t,s){},images:[]}}(jQuery,window,document);